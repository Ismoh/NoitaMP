{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "windows": {
    "options": {
      "shell": {
        "executable": "cmd.exe",
        "args": [
          "/c",
          "call \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Auxiliary\\Build\\vcvarsall.bat\" x86 10.0.22000.0 -vcvars_ver=14",
          "&&",
          "cd ${workspaceFolder}\\mods\\noita-mp",
          "&&"
        ]
      }
    }
  },
  "tasks": [
    {
      "label": "LuaRocks init",
      "type": "shell",
      "windows": {
        "command": "echo '${env:luarocks}' && ${workspaceFolder}\\.building\\luarocks-3.9.1-windows-32\\luarocks.exe config --scope project variables.LUA_BINDIR ${workspaceFolder}\\LuaJIT-2.0.4\\bin && ${workspaceFolder}\\.building\\luarocks-3.9.1-windows-32\\luarocks.exe config --scope project variables.LUA_DIR ${workspaceFolder}\\LuaJIT-2.0.4 && ${workspaceFolder}\\.building\\luarocks-3.9.1-windows-32\\luarocks.exe config --scope project variables.LUA_INCDIR ${workspaceFolder}\\LuaJIT-2.0.4\\include && ${workspaceFolder}\\.building\\luarocks-3.9.1-windows-32\\luarocks.exe config --scope project variables.LUA_LIBDIR ${workspaceFolder}\\LuaJIT-2.0.4\\lib && ${workspaceFolder}\\.building\\luarocks-3.9.1-windows-32\\luarocks.exe --lua-version=\"5.1\" init noita-mp --output=\"${workspaceFolder}\\mods\\noita-mp\" --homepage=\"https://github.com/Ismoh/NoitaMP\" --lua-versions=\"5.1\" --license=\"GNU GPL v3\""
      },
      "problemMatcher": []
    },
    {
      "label": "LuaRocks install {packagename}",
      "type": "shell",
      "windows": {
        "command": "luarocks install ${input:luaRocksInstallPackageName}"
      },
      "problemMatcher": []
    },
    {
      "label": "LuaRocks remove {packagename}",
      "type": "shell",
      "windows": {
        "command": "luarocks remove ${input:luaRocksInstallPackageName}"
      },
      "problemMatcher": []
    },
    {
      "label": "LuaRocks install or update dependencies",
      "type": "shell",
      "windows": {
        "command": "luarocks install --only-deps noita-mp-4.0.1-4.rockspec"
      },
      "problemMatcher": []
    },
    {
      "label": "LuaRocks test",
      "type": "shell",
      "windows": {
        "command": "luarocks test ${input:luaRocksTestCommand}"
      },
      "problemMatcher": []
    },
  ],
  "inputs": [
    {
      "id": "luaRocksInstallPackageName",
      "description": "Write LuaRocks package name, you want to install!",
      "type": "promptString"
    },
    {
      "id": "luaRocksTestCommand",
      "description": "Keep blank for console output otherwise write in file!",
      "type": "pickString",
      "options": ["", " > result.log"]
    }
  ]
}
